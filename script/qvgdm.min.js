$(document).ready(function(){$.ajax({type:"GET",async:!1,url:"php/choixQuestion.php",success:function(a){e=JSON.parse(a)}});var e,a,n,o,t,s,r,i,c,l,d,p,u,h,f,m,_,g,y,v,b,C,x,w,k,P,S="sound/",q=!1;$(".paramBtn").click(function(){$("#settings").fadeIn("fast").css("display","flex").removeClass("cache")}),$(".paramBtn").click(function(){"NON"==$(".paramBtn span").text()?($(".paramBtn span").text("OUI"),q=!0,$("#illustration").prepend("<img class='expressImg' src='img/EXPRESS.svg'/>")):($(".paramBtn span").text("NON"),q=!1,$("#illustration img").remove())});var O="skyblue";g=0,n=[600,1200,2500,5e3,1e4,2e4,4e4,8e4,125e3,25e4,5e5,1e6];var j=[];for(let B=0;B<4;B++){do b=Math.floor(4*Math.random());while(-1!==j.indexOf(b));j.push(b)}$("#question").children("h1").text(e[1][0].question),t=[e[1][0].a,e[1][0].b,e[1][0].c,e[1][0].d],s=["a","b","c","d"];for(let G=0;G<$(".lettre").length;G++)$(".proposition").eq(G).text(t[j[G]]).attr("data-letter",s[j[G]]);(audio=new Audio(S+"QVGDM_Q1-2.wav")).volume=.8,audio.loop=!0,u=16,h=!1,k=0,$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e),pasRep:"true",numQ:1},url:"php/resultat.php"}),$(".btn-classement").click(function(){$("#tabScoreAside").toggleClass("cache").fadeIn("fast").css("display","flex");let e;void 0===P&&$(".points").each(function(){e=$(this).text()>-2&&2>$(this).text()?" pt":" pts",$(this).text(numStr($(this).text()," ")+e),P=!0});for(let a=0;a<$(".affichageScore").length;a++)$(".pseudo").eq(a).text()==$(".session").text()&&(0==a?$(".affichageScore").eq(a).css({background:"#C29B0C",color:"white"}):1==a?$(".affichageScore").eq(a).css({background:"#C0C0C0",color:"white"}):2==a?$(".affichageScore").eq(a).css({background:"#C49C48",color:"white"}):$(".affichageScore").eq(a).css({background:"#251178",color:"white"}));$(".rang").eq(0).children().text("er"),$(".affichageScore").eq(0).addClass("premier"),$(".affichageScore").eq(1).addClass("second"),$(".affichageScore").eq(2).addClass("troiz"),$(".affichageScore").length<=10&&($("#scoreDernier").remove(),$(".affichageScore").length),$(".session").remove()}),$("#tabScoreAside .fa-times").click(function(){$("#tabScoreAside").fadeOut("fast")}),$(".commence").click(function(){$(this).attr("disabled","disabled"),$("#menu").children().eq(1).css("display","none"),$("#menu").toggleClass("aspiration"),setTimeout(function(){$("#menu").css("display","none")},4e3),$(".fa-gear").fadeOut(1),$(window).blur(function(){void 0!==v||""!=$("#sommeNet span").text()||$("body").hasClass("stop")||N(v=1)}),q?(secTtl=u,$(document).width()>756?$("#chronoPortable").remove():$("#chrono").remove(),p=setTimeout(function(){m=10*u,w=setInterval(function(){h||(u-=.01,conic=24*u,_<=10&&(O="red"),$("#chronoProgress").css("animation","chronoPortableAnim 15s linear"),$("#chronoBackground").css("background","conic-gradient("+O+" "+conic+"deg, black 0deg)"),_=Math.ceil(u),m-=.1),10==_&&$("#pivot").css("animation","chronoAnim 10s linear infinite"),0==_&&(u=0,m=0,1!=v&&N(),clearInterval(w),$("#pivot").css("animation-play-state","paused"),$("#chronoProgress").css("animation-play-state","paused"),$("#chrono").css({transform:"scale(0)",transition:"transform 1.5s"}),$("#chronoPortable").css({transform:"scale(0)",transition:"transform 1.5s"}),$("#chrono p").text("0"),$(".pChronoPort").text("0")),0==m&&clearInterval(f),$("#chrono p").text(_),$(".pChronoPort").text(_)},10),clearTimeout(p),m=Math.ceil(m)},2900)):($("#pointsNet").remove(),$(".btn-classement").remove(),$("#chrono").remove(),$("#chronoPortable").remove()),(a=new Audio(S+"QVGDM_Commence.wav")).play(),$("#pivot").delay(4e3).fadeIn("fast"),C=setTimeout(function(){audio.play(),clearTimeout(C)},3e3),o=n.reverse();for(let e=0;e<$(".argentPyra").length;e++)$(".argentPyra").eq(e).text(numStr(o[e]," "))}),$("#joker").children("button").click(function(){if($(this).hasClass("abandon"))""===$(".score .argentPyra").text()?$("#abandonAside span").text("0"):$("#abandonAside span").text($(".score .argentPyra").text()),$("#abandonAside").fadeIn();else switch(h=!0,$("#pivot").css("animation-play-state","paused"),$("#chronoProgress").css("animation-play-state","paused"),$("#chronoBackground").css("animation-play-state","paused"),l=$(this),$(this).attr("disabled","disabled"),$(this).data("joker")){case"50:50":$("body").addClass("stop"),$(this).addClass("select"),$("#joker").addClass("stop");for(let a=0;a<s.length;a++)s[a]==e[I][0].reponse&&s.splice(a,1);s.splice(Math.floor(3*Math.random()),1),$(".proposition").each(function(){for(let e=0;e<s.length;e++)$(this).data("letter")==s[e]&&($(this).delay(1500).fadeOut(),$(this).siblings().delay(1500).fadeOut(),$(this).parent().addClass("stop"))}),p=setTimeout(function(){l.addClass("used"),$("#joker").removeClass("stop"),$("body").removeClass("stop"),h=!1,$("#pivot").css("animation-play-state","running"),$("#chronoProgress").css("animation-play-state","running"),$("#chronoBackground").css("animation-play-state","running"),clearTimeout(p)},1500);break;case"X2":$(this).addClass("select"),$("#joker").addClass("stop"),c="X2";break;case"Switch":if($("body").addClass("stop"),$("#chronoPortable").fadeOut(),c="Switch",$("#question").children().fadeOut(),$("#answer > div").children().fadeOut(),e[I].length>1){e[I].splice(0,1);let n=Math.floor(Math.random()*e[I].length),o=e[I].slice(n,n+1);e[I].splice(n,1),e[I].splice(0,0,o[0])}else{var t=e[I][0].id;e[I].splice(0,1),$.ajax({type:"POST",async:!1,data:{numQ:I,questions:JSON.stringify(e),idRep:t},url:"php/choixQuestion.php",success:function(a){e=JSON.parse(a)}})}timedelay=setTimeout(function(){$("#chronoBackground").css("animation","none"),$("#chronoProgress").css("animation","none"),M(),h=!1,$("#pivot").css("animation","none"),clearInterval(w),clearTimeout(timedelay)},3e3),$(this).addClass("stop"),l.addClass("used")}$(this).data("joker","")}),$(".abandon-confirm").click(function(){e[I].splice(0,1),clearInterval(w),$("#abandonAside").fadeOut("fast"),$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e)},url:"php/resultat.php"}),D(0),$.ajax({type:"post",async:!1,data:{point:F()},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}}),a.onended=function(){i=setTimeout(function(){(a=new Audio(S+"GC_Fin.wav")).volume=.7,a.play()},750)},$("#pivot").addClass("rotation",250)}),$(".abandon-refus").click(function(){$("#abandonAside").fadeOut()});var Q=$(".numQuestion").length,I=1;$("#answer").children().click(function(){($("body").addClass("stop"),$(this).addClass("select"),"X2"===c)?($(this).children(".proposition").data("letter")==e[I][0].reponse?(clearInterval(w),I<12?(clearInterval(w),h=!1,i=setTimeout(function(){$("#pivot").css("animation","none"),$("#chronoProgress").css("animation-play-state","paused"),$("#chronoBackground").css("animation-play-state","paused"),$("#chronoPortable").fadeOut()},3e3),A($(this)),e[I].splice(0,1)):($(this).children(".proposition").data("letter")==e[I][0].reponse?(clearInterval(w),h=!1,i=setTimeout(function(){$("#pivot").css("animation","none")},3e3),e[I].splice(0,1),D(1),$.ajax({type:"post",async:!1,data:{point:F(1)},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}})):(e[I].splice(0,1),timedelay=setTimeout(function(){audio.pause(),audio.currentTime=0,$("#pivot").css("animation-play-state","running"),$("#chronoProgress").css("animation-play-state","running"),$("#chronoBackground").css("animation-play-state","running"),clearTimeout(timedelay)},3e3),a=new Audio(S+"GC_Incorrect.wav"),C=setTimeout(function(){a.volume=.7,a.play(),a.onended=function(){i=setTimeout(function(){(a=new Audio(S+"GC_Fin.wav")).volume=.7,a.play(),clearTimeout(i)},750)},clearTimeout(a)},3250),D(-1),$.ajax({type:"post",async:!1,data:{point:F(-1)},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}})),i=setTimeout(function(){$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e)},url:"php/resultat.php"}),$("#pivot").addClass("rotation",250)},3e3))):($(this).children().delay(3e3).fadeOut(),r=$(this),i=setTimeout(function(){r.removeClass("select"),r.addClass("stop"),$("body").removeClass("stop"),h=!1,$("#pivot").css("animation-play-state","running"),$("#chronoProgress").css("animation-play-state","running"),$("#chronoBackground").css("animation-play-state","running"),clearTimeout(i)},3500)),l.addClass("used")):(clearInterval(w),$("#pivot").css("animation","none"),$("#chronoProgress").css("animation-play-state","paused"),$("#chronoBackground").css("animation-play-state","paused"),$("#chronoPortable").fadeOut(),$("#answer").removeClass("stop"),I<12?$(this).children(".proposition").data("letter")==e[I][0].reponse?(e[I].splice(0,1),A($(this))):N($(this)):($(this).children(".proposition").data("letter")==e[I][0].reponse?(e[I].splice(0,1),D(1),$.ajax({type:"post",async:!1,data:{point:F(1)},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}})):(e[I].splice(0,1),timedelay=setTimeout(function(){audio.pause(),audio.currentTime=0,clearTimeout(timedelay)},3e3),a=new Audio(S+"GC_Incorrect.wav"),C=setTimeout(function(){a.volume=.7,a.play(),a.onended=function(){i=setTimeout(function(){(a=new Audio(S+"GC_Fin.wav")).volume=.7,a.play(),clearTimeout(i)},750)},clearTimeout(a)},3250),D(-1),$.ajax({type:"post",async:!1,data:{point:F(-1)},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}})),i=setTimeout(function(){$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e)},url:"php/resultat.php"}),$("#pivot").addClass("rotation",250)},3e3))),c=void 0}),$(".retourMenu").click(function(){location.reload()});var T=0;function A(n){Q--,k+=u,g+=m=Math.ceil(m),(10==Q||5==Q)&&(y=g),$("#joker").removeClass("stop"),$("#answer > div").removeClass("stop"),audio.loop=!0,Q<5?(a=new Audio(S+"GC_Manche 1_correct.wav"),T=1e3):Q<10?(a=new Audio(S+"GC_Manche 3_correct.wav"),T=1e3):a=new Audio(S+"QVGDM_correct_manche 1.wav"),(5==Q||10==Q)&&(C=setTimeout(function(){audio.pause(),audio.currentTime=0,clearTimeout(C)},3e3),a=new Audio(S+"GC_Round Indent.wav")),r=n,i=setTimeout(function(){r.addClass("correct"),audio.volume=.2,a.volume=.6,a.play(),I<3&&(p=setTimeout(function(){audio.volume=.8,clearTimeout(p)},1e3*a.duration)),$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e)},url:"php/resultat.php"}),$("#answer > div").children().delay(4e3+T).fadeOut(),$("#question").children().delay(4e3+T).fadeOut(),$("#chrono").children().delay(4e3+T).fadeOut(),$("#chrono").delay(4e3+T).fadeTo("normal",0),clearTimeout(i),i=setTimeout(function(){r.removeClass("select").removeClass("correct"),clearTimeout(i)},4e3+T)},3e3),p=setTimeout(function(){M(),clearTimeout(p)},8e3+T)}function N(n){void 0==n||Number.isInteger(n)?(audio.pause(),audio.currentTime=0,clearTimeout(C),T=3e3):(C=setTimeout(function(){audio.pause(),audio.currentTime=0,clearTimeout(C)},3e3),T=6e3),a=new Audio(S+"GC_Incorrect.wav"),$(".lettre").each(function(){$(this).siblings().data("letter")==e[I][0].reponse&&(r=$(this),void 0==n||Number.isInteger(n)?(I<12&&!Number.isInteger(n)&&r.parent().addClass("correct"),a.play(),clearTimeout(p),T=3e3):(T=6e3,p=setTimeout(function(){r.parent().addClass("correct"),a.play(),clearTimeout(p)},3e3)))}),e[I].splice(0,1),i=setTimeout(function(){$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e)},url:"php/resultat.php"}),D(-1),$.ajax({type:"post",async:!1,data:{point:F(-1)},url:"php/qvgdmBdd.php",success:function(e){$("#tabScore").html(e)}}),(a=new Audio(S+"GC_Fin.wav")).volume=.7,C=setTimeout(function(){a.play(),clearTimeout(a)},500),$("#pivot").addClass("rotation",250),clearTimeout(i)},T)}function M(){"Switch"!=c&&($(".score img").attr("src","img/Grolor_gras_orange.svg"),$(".score#palier img").attr("src","img/Grolor_gras_blanc.svg"),$("#pyramide").children("div").removeClass("score"),$("#pyramide").children("div").eq(Q).addClass("score"),$(".score img").attr("src","img/Grolor_black.svg"),$(".numQuestion").eq(Q).append("<i class='fa-solid fa-check'></i>"),I++),I>=3&&(audio.pause(),audio=null,(audio=new Audio(S+"QVGDM_Q"+I+"_music.wav")).volume=.8,audio.loop=!0,audio.play()),j=[];for(let a=0;a<4;a++){var n;do n=Math.floor(4*Math.random());while(-1!==j.indexOf(n));j.push(n)}O="skyblue",I>7?($("body").css("background-image","radial-gradient(#03224c, #0d1428)"),$("#question").css({"border-color":"#c0c0c0"}),$("#answer > div").css({"border-color":"#c0c0c0"}),$("#pyramide").css({"border-color":"#c0c0c0"}),O="#c0c0c0"):I>2&&($("body").css("background-image","radial-gradient(#0131b4, #222870)"),$("#question").css({"border-color":"#cd7f32"}),$("#answer > div").css({"border-color":"#cd7f32"}),$("#pyramide").css({"border-color":"#cd7f32"}),O="#cd7f32"),12==I&&($("body").css("background-image","radial-gradient(#121212, black)"),$("#question").css({"border-color":"#d4af37"}),$("#answer > div").css({"border-color":"#d4af37"}),$("#pyramide").css({"border-color":"#d4af37"}),O="#d4af37"),$("#question").children("h1").text(e[I][0].question),$("#question").css("padding","0 10px"),u=I<=2?15:I<=7?30:I<=11?45:45+Math.ceil(k),$("#chrono p").text(u),$(".pChronoPort").text(u),t=[e[I][0].a,e[I][0].b,e[I][0].c,e[I][0].d],s=["a","b","c","d"];for(let o=0;o<$(".lettre").length;o++)$(".proposition").eq(o).text(t[j[o]]).data("letter",s[j[o]]);$("#question").children().delay(2e3).fadeIn(),$("#answer > div").children().delay(2e3).fadeIn(),$("#chrono").children().delay(2e3).fadeIn(),$("#chrono").delay(2e3).fadeTo("normal",1),$.ajax({type:"POST",async:!1,data:{panelQuestions:JSON.stringify(e),pasRep:"true",numQ:I},url:"php/resultat.php"}),!0==q?(secTtl=u,i=setTimeout(function(){$("body").removeClass("stop"),$("#chronoProgress").css("animation-play-state","running"),$("#chronoBackground").css("animation-play-state","running"),$("#chronoProgress").css("animation","chronoPortableAnim "+u+"s linear"),$("#chronoPortable").fadeIn(),m=10*u,w=setInterval(function(){if(h||(u-=.01,_=Math.ceil(u),conic=360/secTtl*u,_<=10&&(O="red"),$("#chronoBackground").css("background","conic-gradient("+O+" "+conic+"deg, black 0deg)"),m-=.1),10==_&&$("#pivot").css("animation","chronoAnim 10s linear infinite"),0==_&&(u=0,m=0,N(),clearInterval(w),$("#pivot").css("animation-play-state","paused"),$("#chronoProgress").css("animation-play-state","paused"),$("#chrono").css({transform:"scale(0)",transition:"transform 0.5s"}),$("#chronoPortable").css({transform:"scale(0)",transition:"transform 0.5s"}),$("#chrono p").text("0"),$(".pChronoPort").text("0")),0==m&&clearInterval(f),u>=60){let e;e=10>Math.floor(u%60)?"0"+Math.floor(u%60):Math.floor(u%60),$("#chrono p").text(Math.floor(u/60)+":"+e),$(".pChronoPort").text(Math.floor(u/60)+":"+e)}else $("#chrono p").text(_),$(".pChronoPort").text(_)},10)},2e3)):i=setTimeout(function(){$("body").removeClass("stop")},2e3)}function D(e){switch(e){case -1:d=Q<=5?o[5]:Q<=10?o[10]:0;break;case 0:d=12==Q?0:o[Q],a=new Audio(S+"GC_Abandon.wav"),audio.pause(),audio.currentTime=0,timedelay=setTimeout(function(){a.play(),clearTimeout(timedelay)},500);break;case 1:d=o[0],a=new Audio(S+"GC_Winner.wav"),C=setTimeout(function(){audio.pause(),audio.currentTime=0,timedelay=setTimeout(function(){a.play(),a.onended=function(){i=setTimeout(function(){(a=new Audio(S+"GC_Fin.wav")).volume=.7,a.play(),clearTimeout(i)},750)},clearTimeout(timedelay)},500),clearTimeout(C)},3e3),$("#resultatSection").css({backgroundImage:"url('style/feux-artifice.gif'), linear-gradient(-45deg, #0131b4, #03224c)",backgroundSize:"100% 100%"})}return $("#sommeNet span").text(numStr(d," ")),d>=1e6?$("#sommeNet").css("border-color","#d4af37"):d>=4e4?$("#sommeNet").css("border-color","#c0c0c0"):d>=1200&&$("#sommeNet").css("border-color","#cd7f32"),$("body").removeClass("stop"),d}function F(e){let a=0;switch(e){case 1:g+=m=Math.ceil(m);break;case -1:g=10!=Q||5!=Q?y+Math.round(g/4):y,a=5*(12-Q)}let n,o=d/100+g-a-[0,10,30,70][$("#joker").children(".used").length];return o>-2&&o<2?$("#pointsNet span").text(numStr(o," ")+" pt"):$("#pointsNet span").text(numStr(o," ")+" pts"),o}x=[],y=0});